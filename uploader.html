<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Music Metadata Flow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        /* Smooth transitions */
        .fade-enter-active, .fade-leave-active { transition: opacity 0.3s ease; }
        .fade-enter-from, .fade-leave-to { opacity: 0; }
        
        body { background-color: #f3f4f6; font-family: 'Inter', sans-serif; }
        .card-selected { border: 2px solid #6366f1; background-color: #eef2ff; }
        .input-base { @apply w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none transition; }
    </style>
</head>
<body>

<div id="app" class="min-h-screen flex items-center justify-center py-10 px-4">
    
    <div class="bg-white w-full max-w-2xl rounded-2xl shadow-xl overflow-hidden">
        
        <div class="bg-gray-50 px-8 py-6 border-b border-gray-100 flex justify-between items-center">
            <div>
                <h1 class="text-xl font-bold text-gray-800">New Release Details</h1>
                <p class="text-sm text-gray-500">Step {{ currentStep }} of 4</p>
            </div>
            <div class="flex gap-1">
                <div v-for="i in 4" :key="i" class="h-2 w-8 rounded-full transition-all duration-300" :class="currentStep >= i ? 'bg-indigo-600' : 'bg-gray-200'"></div>
            </div>
        </div>

        <div class="p-8 min-h-[400px]">
            
            <transition name="fade" mode="out-in">
                <div v-if="currentStep === 1" key="step1">
                    <h2 class="text-2xl font-semibold mb-6">Let's start with the sound.</h2>
                    
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Primary Genre</label>
                            <select v-model="form.genre" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none">
                                <option disabled value="">Select a genre...</option>
                                <option>Pop</option>
                                <option>Hip Hop</option>
                                <option>Rock</option>
                                <option>Electronic</option>
                                <option>Jazz</option>
                                <option>Classical</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Lyrics Language</label>
                            <select v-model="form.language" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none">
                                <option value="en">English</option>
                                <option value="es">Spanish</option>
                                <option value="fr">French</option>
                                <option value="instrumental">ðŸš« Instrumental (No Lyrics)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div v-else-if="currentStep === 2" key="step2">
                    <h2 class="text-2xl font-semibold mb-2">Your contribution</h2>
                    <p class="text-gray-500 mb-6">Select everything you did on this track. We'll credit you as <strong>{{ artistName }}</strong>.</p>

                    <div class="space-y-4">
                        
                        <div @click="toggleRole('composer')" 
                             :class="['cursor-pointer p-4 rounded-xl border transition-all flex items-center gap-4', form.isComposer ? 'card-selected' : 'border-gray-200 hover:border-indigo-300']">
                            <div class="p-2 bg-indigo-100 text-indigo-600 rounded-lg">
                                <i data-lucide="pen-tool"></i>
                            </div>
                            <div class="flex-1">
                                <h3 class="font-medium">I wrote this song</h3>
                                <p class="text-sm text-gray-500">Composer / Songwriter</p>
                            </div>
                            <div v-if="form.isComposer" class="text-indigo-600">
                                <i data-lucide="check-circle"></i>
                            </div>
                        </div>

                        <div class="border border-gray-200 rounded-xl overflow-hidden transition-all" :class="form.isPerformer ? 'ring-2 ring-indigo-500 border-transparent' : ''">
                            <div @click="toggleRole('performer')" class="cursor-pointer p-4 flex items-center gap-4 bg-white hover:bg-gray-50">
                                <div class="p-2 bg-pink-100 text-pink-600 rounded-lg">
                                    <i data-lucide="mic-2"></i>
                                </div>
                                <div class="flex-1">
                                    <h3 class="font-medium">I performed on this</h3>
                                    <p class="text-sm text-gray-500">Main Artist / Musician</p>
                                </div>
                                <div v-if="form.isPerformer" class="text-indigo-600"><i data-lucide="check-circle"></i></div>
                            </div>
                            
                            <div v-if="form.isPerformer" class="bg-gray-50 p-4 border-t border-gray-200 animate-slide-down">
                                <label class="text-xs font-bold text-gray-500 uppercase tracking-wide">Select Primary Instrument</label>
                                <select v-model="form.instrument" class="mt-2 w-full p-2 border rounded bg-white">
                                    <option>Vocals</option>
                                    <option>Guitar</option>
                                    <option>Drums</option>
                                    <option>Bass</option>
                                    <option>Piano/Keys</option>
                                    <option>Synthesizer</option>
                                    <option>Strings</option>
                                    <option>Brass</option>
                                    <option>Percussion</option>
                                    <option>Computer/Laptop</option>
                                </select>
                            </div>
                        </div>

                        <div class="border border-gray-200 rounded-xl overflow-hidden transition-all" :class="form.isProducer ? 'ring-2 ring-indigo-500 border-transparent' : ''">
                            <div @click="toggleRole('producer')" class="cursor-pointer p-4 flex items-center gap-4 bg-white hover:bg-gray-50">
                                <div class="p-2 bg-emerald-100 text-emerald-600 rounded-lg">
                                    <i data-lucide="sliders"></i>
                                </div>
                                <div class="flex-1">
                                    <h3 class="font-medium">I produced this</h3>
                                    <p class="text-sm text-gray-500">Production / Engineering</p>
                                </div>
                                <div v-if="form.isProducer" class="text-indigo-600"><i data-lucide="check-circle"></i></div>
                            </div>
                            
                            <div v-if="form.isProducer" class="bg-gray-50 p-4 border-t border-gray-200">
                                <label class="text-xs font-bold text-gray-500 uppercase tracking-wide">Specific Role</label>
                                <select v-model="form.productionRole" class="mt-2 w-full p-2 border rounded bg-white">
                                    <option>Executive Producer</option>
                                    <option>Main Producer</option>
                                    <option>Beatmaker</option>
                                    <option>Mixing Engineer</option>
                                    <option>Mastering Engineer</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div v-else-if="currentStep === 3" key="step3">
                    
                    <div class="mb-8">
                        <div class="flex justify-between items-end mb-4">
                            <h2 class="text-xl font-bold">Collaborators</h2>
                            <button @click="showContributorModal = true" class="text-sm font-medium text-indigo-600 hover:text-indigo-800 flex items-center gap-1">
                                <i data-lucide="plus-circle" class="w-4 h-4"></i> Add Person
                            </button>
                        </div>
                        
                        <div v-if="contributors.length === 0" class="text-center p-6 border-2 border-dashed border-gray-200 rounded-xl text-gray-400">
                            No other contributors added yet.
                        </div>

                        <div v-else class="space-y-3">
                            <div v-for="(person, index) in contributors" :key="index" class="flex items-center justify-between p-3 bg-white border rounded-lg shadow-sm">
                                <div>
                                    <div class="font-medium text-gray-900">{{ person.name }}</div>
                                    <div class="text-xs text-gray-500">{{ person.role }}</div>
                                </div>
                                <button @click="contributors.splice(index, 1)" class="text-red-400 hover:text-red-600"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                            </div>
                        </div>
                    </div>

                    <hr class="border-gray-100 my-6">

                    <h2 class="text-xl font-bold mb-4">Rights & IDs</h2>
                    
                    <div v-if="form.language !== 'instrumental'" class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Who wrote the lyrics?</label>
                        <div class="flex gap-2 mb-2">
                            <button @click="isLyricistSelf = true" :class="['px-4 py-2 rounded-lg text-sm', isLyricistSelf ? 'bg-indigo-600 text-white' : 'bg-gray-100 text-gray-600']">Me ({{ artistName }})</button>
                            <button @click="isLyricistSelf = false" :class="['px-4 py-2 rounded-lg text-sm', !isLyricistSelf ? 'bg-indigo-600 text-white' : 'bg-gray-100 text-gray-600']">Someone else</button>
                        </div>
                        <input v-if="!isLyricistSelf" v-model="form.lyricistName" placeholder="Enter Lyricist First & Last Name" class="w-full p-2 border rounded">
                    </div>

                    <div class="space-y-3">
                        <div class="border rounded-lg p-3">
                            <div class="flex justify-between items-center cursor-pointer" @click="toggleSection('isrc')">
                                <span class="text-sm font-medium text-gray-700">Have an ISRC Code?</span>
                                <span class="text-xs text-indigo-600">{{ showIsrc ? 'Hide' : 'Add' }}</span>
                            </div>
                            <div v-if="showIsrc" class="mt-3">
                                <input v-model="form.isrc" placeholder="US-XXX-25-00001" class="w-full p-2 border rounded uppercase">
                            </div>
                        </div>

                        <div class="border rounded-lg p-3">
                            <div class="flex justify-between items-center cursor-pointer" @click="toggleSection('pub')">
                                <span class="text-sm font-medium text-gray-700">Publisher Info</span>
                                <span class="text-xs text-indigo-600">{{ showPub ? 'Hide' : 'Add' }}</span>
                            </div>
                            <div v-if="showPub" class="mt-3 space-y-2">
                                <input v-model="form.publisher" placeholder="Publisher Name" class="w-full p-2 border rounded">
                            </div>
                        </div>
                    </div>

                </div>

                <div v-else-if="currentStep === 4" key="step4">
                    <h2 class="text-2xl font-bold mb-2">Final Touch</h2>
                    <p class="text-gray-500 mb-6">Upload your cover art to finish the setup.</p>
                    
                    <div class="border-2 border-dashed border-indigo-200 rounded-2xl p-10 text-center bg-indigo-50 hover:bg-indigo-100 transition cursor-pointer relative group">
                        <input type="file" @change="handleImage" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer">
                        
                        <div v-if="!coverArtPreview">
                            <div class="mx-auto w-16 h-16 bg-white rounded-full flex items-center justify-center text-indigo-500 mb-4 shadow-sm group-hover:scale-110 transition">
                                <i data-lucide="image" class="w-8 h-8"></i>
                            </div>
                            <p class="font-medium text-gray-900">Click or Drag Artwork</p>
                            <p class="text-sm text-gray-500 mt-1">3000 x 3000px JPG/PNG</p>
                        </div>

                        <div v-else class="relative">
                            <img :src="coverArtPreview" class="w-48 h-48 mx-auto rounded-lg shadow-lg object-cover">
                            <p class="text-sm text-green-600 font-bold mt-4">Looks great!</p>
                        </div>
                    </div>
                </div>
            </transition>
        </div>

        <div class="bg-gray-50 px-8 py-6 border-t border-gray-100 flex justify-between items-center">
            <button 
                v-if="currentStep > 1" 
                @click="currentStep--" 
                class="text-gray-500 hover:text-gray-800 font-medium px-4 py-2">
                Back
            </button>
            <div v-else></div> <button 
                @click="nextStep" 
                class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium px-8 py-3 rounded-full shadow-lg hover:shadow-xl transition transform hover:-translate-y-0.5">
                {{ currentStep === 4 ? 'Submit Release' : 'Continue' }}
            </button>
        </div>
    </div>

    <div v-if="showContributorModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 backdrop-blur-sm">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md p-6">
            <h3 class="text-lg font-bold mb-4">Add Contributor</h3>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Name</label>
                    <input v-model="tempContributor.name" class="w-full p-2 border rounded">
                </div>
                <div>
                    <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Role</label>
                    <select v-model="tempContributor.role" class="w-full p-2 border rounded">
                        <option>Featured Artist</option>
                        <option>Producer</option>
                        <option>Songwriter</option>
                        <option>Mixer</option>
                    </select>
                </div>
                <div>
                    <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Spotify URL (Optional)</label>
                    <input v-model="tempContributor.spotify" placeholder="https://open.spotify.com/..." class="w-full p-2 border rounded">
                </div>
            </div>

            <div class="flex gap-2 mt-6">
                <button @click="showContributorModal = false" class="flex-1 py-2 text-gray-600 hover:bg-gray-100 rounded-lg">Cancel</button>
                <button @click="addContributor" class="flex-1 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">Add</button>
            </div>
        </div>
    </div>

</div>

<script>
    const { createApp } = Vue;

    createApp({
        data() {
            return {
                currentStep: 1,
                artistName: "The Weekend Users", // Auto-populated from system
                
                // Form Data
                form: {
                    genre: '',
                    language: 'en',
                    isComposer: false,
                    isPerformer: false,
                    isProducer: false,
                    instrument: 'Vocals',
                    productionRole: 'Main Producer',
                    lyricistName: '',
                    isrc: '',
                    publisher: '',
                },

                // UI State
                isLyricistSelf: true,
                showIsrc: false,
                showPub: false,
                showContributorModal: false,
                contributors: [],
                tempContributor: { name: '', role: 'Featured Artist', spotify: '' },
                coverArtPreview: null
            }
        },
        mounted() {
            // Initialize Lucide icons
            lucide.createIcons();
        },
        updated() {
            // Re-initialize icons when DOM updates
            lucide.createIcons();
        },
        methods: {
            nextStep() {
                if (this.currentStep < 4) {
                    this.currentStep++;
                } else {
                    alert("Submission Complete! Check console for JSON.");
                    console.log(JSON.stringify(this.form));
                    console.log("Contributors:", this.contributors);
                }
            },
            toggleRole(role) {
                if(role === 'composer') this.form.isComposer = !this.form.isComposer;
                if(role === 'performer') this.form.isPerformer = !this.form.isPerformer;
                if(role === 'producer') this.form.isProducer = !this.form.isProducer;
            },
            toggleSection(sec) {
                if(sec === 'isrc') this.showIsrc = !this.showIsrc;
                if(sec === 'pub') this.showPub = !this.showPub;
            },
            addContributor() {
                if(!this.tempContributor.name) return;
                this.contributors.push({...this.tempContributor});
                this.tempContributor = { name: '', role: 'Featured Artist', spotify: '' };
                this.showContributorModal = false;
            },
            handleImage(e) {
                const file = e.target.files[0];
                if(file) {
                    this.coverArtPreview = URL.createObjectURL(file);
                }
            }
        }
    }).mount('#app');
</script>
</body>
</html>
